<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ERCOT Deep Dive — Hourly CFE Optimizer</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700&family=Rajdhani:wght@400;500;600;700&family=Barlow+Semi+Condensed:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
@font-face {
    font-family: 'Franklin Gothic Demi';
    src: local('Franklin Gothic Demi'), local('Franklin Gothic Medium'), local('ITC Franklin Gothic Demi'), local('Franklin Gothic Demi Cond');
    font-weight: 600;
    font-style: normal;
    font-display: swap;
}
</style>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
<style>
/* ========== RESET & BASE ========== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html {
    font-size: 17px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    scroll-behavior: smooth;
}

body {
    font-family: 'Plus Jakarta Sans', 'Helvetica Neue', Arial, sans-serif;
    background: #0F1A2E;
    background-image:
        radial-gradient(ellipse at 20% 0%, rgba(14,165,233,0.06) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 100%, rgba(245,158,11,0.04) 0%, transparent 50%);
    background-attachment: fixed;
    color: #000000;
    line-height: 1.55;
    min-height: 100vh;
}

:root {
    --navy: #1A2744;
    --navy-light: #2D3A52;
    --bg-card: #FFFFFF;
    --bg-card-hover: #F7F8FA;
    --border: #D4D8E0;
    --border-light: #E5E7EB;
    --text-primary: #000000;
    --text-secondary: #000000;
    --text-muted: #6B7280;
    --clean-firm: #1E3A5F;
    --solar: #F59E0B;
    --wind: #22C55E;
    --hydro: #0EA5E9;
    --storage: #EF4444;
    --accent-blue: #4a90d9;
    --accent-warm: #f4a261;
}

/* ========== TOP NAVIGATION BAR ========== */
.top-nav {
    background: #1a1a2e;
    padding: 0 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: sticky;
    top: 0;
    z-index: 999;
    border-bottom: 1px solid rgba(255,255,255,0.08);
    min-height: 48px;
}
.top-nav-inner {
    display: flex;
    align-items: center;
    gap: 0;
    max-width: 1440px;
    width: 100%;
    justify-content: center;
}
.top-nav a {
    color: rgba(255,255,255,0.75);
    text-decoration: none;
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', 'Arial Narrow', sans-serif;
    font-size: 0.85rem;
    font-weight: 600;
    letter-spacing: 0.04em;
    padding: 14px 18px;
    transition: color 0.2s, background 0.2s, border-color 0.2s;
    border-bottom: 3px solid transparent;
    white-space: nowrap;
}
.top-nav a:hover {
    color: #ffffff;
    background: rgba(255,255,255,0.06);
}
.top-nav a.nav-active {
    color: #ffffff;
    border-bottom-color: #0EA5E9;
    background: rgba(14,165,233,0.1);
}
.nav-hamburger {
    display: none;
    background: none;
    border: none;
    color: #ffffff;
    font-size: 1.5rem;
    cursor: pointer;
    padding: 10px;
    min-width: 44px;
    min-height: 44px;
    align-items: center;
    justify-content: center;
}
.nav-hamburger svg {
    width: 24px;
    height: 24px;
    stroke: currentColor;
    stroke-width: 2;
    fill: none;
}
@media (max-width: 768px) {
    .top-nav {
        flex-wrap: wrap;
        padding: 0 12px;
        justify-content: space-between;
    }
    .top-nav-inner {
        display: none;
        flex-direction: column;
        width: 100%;
        padding-bottom: 8px;
    }
    .top-nav-inner.nav-open {
        display: flex;
    }
    .top-nav a {
        padding: 12px 16px;
        border-bottom: none;
        border-left: 3px solid transparent;
        width: 100%;
        text-align: left;
    }
    .top-nav a.nav-active {
        border-left-color: #0EA5E9;
        border-bottom: none;
        background: rgba(14,165,233,0.12);
    }
    .nav-hamburger {
        display: flex;
    }
    .nav-brand {
        display: flex;
        align-items: center;
        color: #ffffff;
        font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
        font-size: 0.9rem;
        font-weight: 700;
        letter-spacing: 0.03em;
        padding: 12px 0;
    }
}
@media (min-width: 769px) {
    .nav-brand { display: none; }
}

/* ========== HEADER BANNER ========== */
.header {
    background: linear-gradient(135deg, #0F1A2E 0%, #122952 30%, #1565C0 70%, #0D47A1 100%);
    color: #ffffff;
    padding: 90px 24px 80px;
    text-align: center;
    position: relative;
    overflow: hidden;
}
.header::before {
    content: '';
    position: absolute;
    inset: 0;
    z-index: 1;
    pointer-events: none;
    background:
        radial-gradient(ellipse 55% 70% at 12% 75%, rgba(14,165,233,0.4) 0%, transparent 65%),
        radial-gradient(ellipse 45% 60% at 38% 85%, rgba(34,197,94,0.35) 0%, transparent 60%),
        radial-gradient(ellipse 50% 65% at 62% 80%, rgba(245,158,11,0.35) 0%, transparent 60%),
        radial-gradient(ellipse 40% 55% at 88% 70%, rgba(239,68,68,0.3) 0%, transparent 55%);
}
.header::after {
    content: '';
    position: absolute;
    inset: 0;
    z-index: 1;
    pointer-events: none;
    background: radial-gradient(ellipse 70% 45% at 50% 45%, rgba(5,15,35,0.55) 0%, transparent 100%);
}
.header-accent {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #1A2744 0%, #0EA5E9 25%, #22C55E 50%, #F59E0B 75%, #EF4444 100%);
    z-index: 2;
}
.header h1 {
    font-family: 'Franklin Gothic Demi', 'Lexend', 'Rajdhani', 'Arial Narrow', 'Helvetica Neue', Arial, sans-serif;
    font-weight: 700;
    font-size: 3.2rem;
    letter-spacing: 0.5px;
    text-transform: none;
    margin-bottom: 14px;
    position: relative;
    z-index: 3;
    text-shadow: 0 2px 20px rgba(0,0,0,0.5), 0 1px 3px rgba(0,0,0,0.3);
    line-height: 1.15;
}
.header .subtitle {
    font-family: 'Plus Jakarta Sans', 'Helvetica Neue', Arial, sans-serif;
    font-size: 1.15rem;
    font-weight: 400;
    opacity: 0.92;
    max-width: 660px;
    margin: 0 auto;
    letter-spacing: 0.2px;
    position: relative;
    z-index: 3;
    text-shadow: 0 2px 12px rgba(0,0,0,0.4), 0 1px 2px rgba(0,0,0,0.2);
    line-height: 1.55;
}

/* ========== MAIN CONTENT ========== */
.main-content {
    max-width: 1440px;
    margin: 0 auto;
    padding: 0;
    background: #F3F4F8;
}

/* ========== SCROLLYTELLING SECTIONS ========== */
.scroll-section {
    min-height: 80vh;
    padding: 80px 44px;
    border-bottom: 1px solid var(--border-light);
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
}
.scroll-section:last-child {
    border-bottom: none;
}
.scroll-section:nth-child(even) {
    background: #FFFFFF;
}
.scroll-section:nth-child(odd) {
    background: #F3F4F8;
}
.section-number {
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 0.78rem;
    font-weight: 700;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--accent-blue);
    margin-bottom: 12px;
}
.section-title {
    font-family: 'Franklin Gothic Demi', 'Lexend', 'Rajdhani', 'Arial Narrow', sans-serif;
    font-weight: 700;
    font-size: 2.2rem;
    color: var(--navy);
    margin-bottom: 32px;
    text-align: center;
    line-height: 1.2;
    max-width: 800px;
}
.section-narrative {
    max-width: 800px;
    font-size: 1.06rem;
    line-height: 1.75;
    color: var(--text-primary);
    margin-bottom: 24px;
}
.section-narrative p {
    margin-bottom: 20px;
}
.section-narrative strong {
    color: var(--navy);
}

/* ========== CHART PLACEHOLDERS ========== */
.chart-container {
    width: 100%;
    max-width: 700px;
    margin: 32px auto;
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    border-radius: 12px;
    padding: 28px;
    position: relative;
}
.chart-container canvas {
    width: 100% !important;
    height: 350px !important;
}
.chart-container .chart-title {
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-weight: 600;
    font-size: 1.0rem;
    color: var(--navy);
    margin-bottom: 16px;
    text-align: center;
}
.chart-placeholder-msg {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: var(--text-muted);
    font-size: 0.9rem;
    font-style: italic;
    text-align: center;
    padding: 20px;
    pointer-events: none;
}

/* ========== KEY INSIGHTS ========== */
.insights-list {
    max-width: 800px;
    list-style: none;
    padding: 0;
}
.insights-list li {
    position: relative;
    padding: 16px 0 16px 36px;
    font-size: 1.06rem;
    line-height: 1.65;
    border-bottom: 1px solid var(--border-light);
}
.insights-list li:last-child {
    border-bottom: none;
}
.insights-list li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 22px;
    width: 18px;
    height: 18px;
    background: var(--accent-blue);
    border-radius: 50%;
    opacity: 0.8;
}

/* ========== STAT CALLOUT ========== */
.stat-callout {
    display: flex;
    gap: 32px;
    flex-wrap: wrap;
    justify-content: center;
    margin: 32px 0;
    max-width: 800px;
}
.stat-box {
    background: linear-gradient(145deg, #f8f9fb 0%, #f0f2f5 100%);
    border: 1px solid var(--border-light);
    border-radius: 10px;
    padding: 24px 32px;
    text-align: center;
    min-width: 160px;
    flex: 1;
    max-width: 220px;
}
.stat-value {
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 2rem;
    font-weight: 700;
    color: var(--navy);
    line-height: 1.1;
}
.stat-label {
    font-size: 0.82rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--text-muted);
    margin-top: 6px;
}

/* ========== FOOTER ========== */
.page-footer {
    background: #1a1a2e;
    color: rgba(255,255,255,0.7);
    padding: 48px 24px;
    text-align: center;
}
.footer-links {
    display: flex;
    gap: 24px;
    justify-content: center;
    flex-wrap: wrap;
    margin-bottom: 20px;
}
.footer-links a {
    color: rgba(255,255,255,0.8);
    text-decoration: none;
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 0.88rem;
    font-weight: 600;
    letter-spacing: 0.04em;
    padding: 8px 16px;
    border-radius: 6px;
    transition: background 0.2s, color 0.2s;
    min-height: 44px;
    display: flex;
    align-items: center;
}
.footer-links a:hover {
    background: rgba(255,255,255,0.08);
    color: #ffffff;
}
.footer-note {
    font-size: 0.82rem;
    opacity: 0.5;
    margin-top: 12px;
}

/* ========== BOTTOM ACCENT BAR ========== */
.bottom-banner {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 6px;
    background: linear-gradient(90deg, #1A2744 0%, #0EA5E9 25%, #22C55E 50%, #F59E0B 75%, #EF4444 100%);
    z-index: 1000;
}

/* ========== RESPONSIVE ========== */
@media (max-width: 768px) {
    .header { padding: 60px 16px 50px; }
    .header h1 { font-size: 2.2rem; }
    .header .subtitle { font-size: 1rem; }
    .scroll-section { padding: 48px 20px; min-height: auto; }
    .section-title { font-size: 1.7rem; }
    .section-narrative { font-size: 1rem; }
    .chart-container { padding: 16px; }
    .chart-container canvas { height: 260px !important; }
    .stat-callout { gap: 16px; }
    .stat-box { min-width: 130px; padding: 16px 20px; }
    .stat-value { font-size: 1.6rem; }
}
@media (max-width: 480px) {
    .header h1 { font-size: 1.8rem; }
    .stat-callout { flex-direction: column; align-items: center; }
    .stat-box { max-width: 100%; width: 100%; }
}

/* Scroll-triggered animations */
@keyframes fadeSlideUp {
    from { opacity: 0; transform: translateY(40px); }
    to   { opacity: 1; transform: translateY(0); }
}
.scroll-reveal {
    opacity: 0;
    transform: translateY(40px);
    transition: opacity 0.7s cubic-bezier(0.23, 1, 0.32, 1), transform 0.7s cubic-bezier(0.23, 1, 0.32, 1);
}
.scroll-reveal.revealed {
    opacity: 1;
    transform: translateY(0);
}
.scroll-reveal.reveal-delay-1 { transition-delay: 0.15s; }
.scroll-reveal.reveal-delay-2 { transition-delay: 0.3s; }
.scroll-reveal.reveal-delay-3 { transition-delay: 0.45s; }
.scroll-section {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.scroll-section:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.08);
}
@media (prefers-reduced-motion: reduce) {
    .scroll-reveal { opacity: 1; transform: none; transition: none; }
    .scroll-section:hover { transform: none; box-shadow: none; }
}
</style>
</head>
<body>

<!-- ========== TOP NAVIGATION ========== -->
<nav class="top-nav">
    <span class="nav-brand">Hourly CFE Optimizer</span>
    <button class="nav-hamburger" onclick="document.querySelector('.top-nav-inner').classList.toggle('nav-open')" aria-label="Toggle navigation">
        <svg viewBox="0 0 24 24"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
    </button>
    <div class="top-nav-inner">
        <a href="dashboard.html">Dashboard</a>
        <a href="region_caiso.html">CAISO</a>
        <a href="region_ercot.html" class="nav-active">ERCOT</a>
        <a href="region_pjm.html">PJM</a>
        <a href="region_nyiso.html">NYISO</a>
        <a href="region_neiso.html">NEISO</a>
        <a href="optimizer_methodology.html">Methodology</a>
        <a href="research_paper.html">Paper</a>
    </div>
</nav>

<!-- ========== HEADER BANNER ========== -->
<header class="header">
    <h1>ERCOT Deep Dive</h1>
    <p class="subtitle">Texas Grid Decarbonization Analysis</p>
    <div class="header-accent"></div>
</header>

<!-- ========== MAIN CONTENT ========== -->
<main class="main-content">

    <!-- SECTION 1: Region Overview -->
    <section class="scroll-section">
        <span class="section-number">Section 1</span>
        <h2 class="section-title">The Texas Grid at a Glance</h2>
        <div class="section-narrative">
            <p>The Electric Reliability Council of Texas (ERCOT) is unlike any other grid in the United States. It is largely islanded from the rest of the country -- meaning Texas manages its own electricity system with minimal connections to neighboring grids. This independence means Texas cannot easily import clean power from other regions, but it also means the state has built an extraordinarily competitive wholesale electricity market with some of the lowest power prices in the nation.</p>
            <p>Wind energy is the dominant story of the Texas grid. With nearly a quarter of all generation coming from wind turbines (23.6%), ERCOT is the undisputed wind capital of the United States. The plains of West Texas and the Gulf Coast produce some of the strongest, most consistent wind resources on the continent. Add in a growing solar fleet (13.8%) and existing nuclear generation (8.6%), and ERCOT's clean energy portfolio is surprisingly robust -- roughly <strong>46.1% clean</strong> in aggregate.</p>
            <p>What makes ERCOT particularly interesting for hourly clean energy analysis is its unique combination of low costs and abundant resources. Electricity here averages about $27/MWh at wholesale -- the lowest of any major region we study. Construction costs are low, permitting is fast, and the flat terrain makes building wind, solar, and storage projects easier and cheaper. On the other hand, ERCOT's near-zero hydroelectric capacity (just 0.1%) means it lacks the flexible water-based generation that helps other regions smooth out variability.</p>
        </div>
        <div class="stat-callout">
            <div class="stat-box">
                <div class="stat-value">23.6%</div>
                <div class="stat-label">Wind Share</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">13.8%</div>
                <div class="stat-label">Solar Share</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">8.6%</div>
                <div class="stat-label">Clean Firm</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">0.1%</div>
                <div class="stat-label">Hydro Share</div>
            </div>
        </div>
    </section>

    <!-- SECTION 2: Today's Starting Point -->
    <section class="scroll-section">
        <span class="section-number">Section 2</span>
        <h2 class="section-title">Today's Starting Point: What the Existing Grid Delivers</h2>
        <div class="section-narrative">
            <p>The Texas grid already delivers a substantial amount of clean energy on an hourly basis, but with a distinctive pattern that looks very different from California's solar-dominated profile. In ERCOT, the clean energy peak often comes at night -- when wind speeds are highest across the West Texas plains -- rather than during the middle of the day.</p>
            <p>Think of CAISO as a daytime worker and ERCOT as a night-shift worker. California's clean energy shows up reliably during business hours, then clocks out at sunset. Texas wind tends to blow strongest in the late evening and early morning hours, providing clean power during periods when solar-heavy grids go dark. This complementary pattern is one reason why a diversified national clean energy portfolio is so valuable.</p>
            <p>The challenge for ERCOT is not that it lacks clean energy -- it has plenty. The challenge is that wind is inherently variable. Some weeks deliver exceptional wind speeds around the clock; others bring frustrating lulls that can last for days. This "feast or famine" quality means ERCOT's hourly match score can swing dramatically from one week to the next, making reliable hour-by-hour matching more difficult than the annual average might suggest.</p>
        </div>
        <div class="chart-container">
            <div class="chart-title">Hourly Clean Energy Match from Existing ERCOT Grid</div>
            <canvas id="baselineChart"></canvas>
            <div class="chart-placeholder-msg">Chart data will populate when optimizer results are loaded</div>
        </div>
    </section>

    <!-- SECTION 3: The Decarbonization Pathway -->
    <section class="scroll-section">
        <span class="section-number">Section 3</span>
        <h2 class="section-title">The Decarbonization Pathway: From 75% to 100%</h2>
        <div class="section-narrative">
            <p>ERCOT's path to deep decarbonization is shaped by two powerful advantages: abundant wind at the nation's lowest cost ($40/MWh at Medium), and a uniquely favorable position for carbon capture and storage (CCS). The Gulf Coast of Texas sits atop some of the world's best geology for permanent CO2 sequestration -- deep saline formations and depleted oil and gas reservoirs that are ideal for storing captured carbon dioxide.</p>
            <p>At the 75-85% range, the optimizer leans heavily on additional wind capacity, supplemented by solar and modest battery storage. Wind in Texas is so cheap that it dominates the early stages of the optimization, pushing costs well below what other regions can achieve at similar thresholds. This is not surprising -- Texas has been building wind at a remarkable pace for over a decade, and the economics just keep improving.</p>
            <p>The inflection zone between 88% and 95% is where ERCOT's CCS advantage becomes apparent. Because Texas has short CO2 transport distances to Class VI sequestration wells, CCS-equipped natural gas plants (CCS-CCGT) are cheaper here than anywhere in the country ($71/MWh at Medium, net of the federal 45Q tax credit). The optimizer deploys CCS-CCGT as a dispatchable clean resource that can fill the gaps when wind drops off for extended periods -- something batteries alone cannot do.</p>
            <p>Pushing beyond 95% still requires long-duration energy storage and additional clean firm resources, but ERCOT's low-cost foundation means even the expensive last miles are cheaper here in absolute dollar terms than in most other regions.</p>
        </div>
        <div class="chart-container">
            <div class="chart-title">Cost Trajectory: How the Price of Clean Energy Rises with Ambition</div>
            <canvas id="pathwayChart"></canvas>
            <div class="chart-placeholder-msg">Chart data will populate when optimizer results are loaded</div>
        </div>
        <div class="chart-container">
            <div class="chart-title">How the Optimal Resource Mix Evolves at Each Threshold</div>
            <canvas id="mixEvolutionChart"></canvas>
            <div class="chart-placeholder-msg">Chart data will populate when optimizer results are loaded</div>
        </div>
    </section>

    <!-- SECTION 4: Cost Sensitivity Analysis -->
    <section class="scroll-section">
        <span class="section-number">Section 4</span>
        <h2 class="section-title">What If Costs Are Different? Sensitivity Analysis</h2>
        <div class="section-narrative">
            <p>In ERCOT, three variables have the most influence on the total cost of achieving hourly clean energy targets. These are the levers that procurement strategists should watch most closely:</p>
            <p><strong>Wind cost</strong> is the single biggest driver. Because wind dominates the optimal resource mix at most thresholds, any change in wind turbine and installation costs ($30/MWh Low to $52/MWh High) flows directly through to total system costs. The spread between low and high wind cost scenarios in ERCOT is wider than in any other region, reflecting the fact that wind does more of the heavy lifting here.</p>
            <p><strong>Natural gas price</strong> affects ERCOT through two channels. First, it shifts wholesale electricity prices, which determine the cost of the "existing grid" baseline. Second, and more importantly for this analysis, gas prices directly affect the operating cost of CCS-CCGT plants -- the key dispatchable clean resource in the 88-100% range. At low gas prices ($2.00/MMBtu), CCS-CCGT becomes even more competitive, potentially entering the optimal mix earlier. At high gas prices ($6.00/MMBtu), the optimizer shifts away from CCS-CCGT toward more wind overbuild and storage.</p>
            <p><strong>CCS-CCGT cost</strong> matters independently of gas prices because it captures the capital and infrastructure costs of building carbon capture facilities and CO2 transport pipelines. ERCOT already has the lowest CCS costs in the country, but the difference between the low ($52/MWh) and high ($92/MWh) scenarios significantly changes the threshold at which CCS enters the optimal mix and how much capacity gets built.</p>
        </div>
        <div class="chart-container">
            <div class="chart-title">Total Cost Impact of Key Sensitivity Toggles in ERCOT</div>
            <canvas id="sensitivityChart"></canvas>
            <div class="chart-placeholder-msg">Chart data will populate when optimizer results are loaded</div>
        </div>
    </section>

    <!-- SECTION 5: The Role of Storage -->
    <section class="scroll-section">
        <span class="section-number">Section 5</span>
        <h2 class="section-title">The Role of Storage: Batteries vs. Long-Duration</h2>
        <div class="section-narrative">
            <p>Storage plays a somewhat different role in ERCOT than in solar-heavy regions like CAISO. In California, batteries have an obvious daily job: store solar surplus, release it at sunset. In Texas, the storage challenge is more nuanced because wind does not follow a neat daily cycle. Wind can blow strongly for three days straight, then go nearly calm for two days. This pattern changes the calculus for which type of storage is most valuable.</p>
            <p><strong>Batteries (4-hour lithium-ion)</strong> are still cost-effective in ERCOT, primarily for capturing solar surplus during midday hours and for smoothing short wind fluctuations. Texas has excellent battery economics -- the lowest construction costs of any region we study ($92/MWh LCOS at Medium) -- thanks to cheap land, fast permitting, and a mature supply chain. The optimizer deploys batteries consistently from 80% through 95%.</p>
            <p><strong>Long-duration energy storage (LDES)</strong> has a particularly compelling case in ERCOT because of the multi-day wind variability problem. When a high-pressure weather system parks over West Texas and wind output drops to near zero for 48-72 hours, batteries are simply too small to bridge the gap. LDES, with its 100-hour discharge capability, can absorb surplus from a strong wind week and release it during the following calm period. ERCOT's LDES costs are also the lowest in the country ($155/MWh at Medium), making this region the most favorable for early LDES deployment.</p>
            <p>The transition from battery-sufficient to LDES-necessary happens around the 91-93% range in ERCOT -- slightly earlier than in CAISO, reflecting the multi-day nature of wind variability versus the predictable daily cycle of solar.</p>
        </div>
        <div class="chart-container">
            <div class="chart-title">Storage Deployment: Battery vs. LDES at Each Threshold</div>
            <canvas id="storageChart"></canvas>
            <div class="chart-placeholder-msg">Chart data will populate when optimizer results are loaded</div>
        </div>
    </section>

    <!-- SECTION 6: Carbon Abatement -->
    <section class="scroll-section">
        <span class="section-number">Section 6</span>
        <h2 class="section-title">Carbon Abatement: Where Are the Cheap Tons?</h2>
        <div class="section-narrative">
            <p>ERCOT presents an interesting carbon abatement profile. The region's marginal fossil generation is overwhelmingly natural gas (coal has been largely retired, with only about 10 GW remaining). Natural gas emits roughly half as much CO2 per megawatt-hour as coal, which means each clean MWh deployed in Texas displaces fewer tons of carbon than the same MWh would displace in a coal-heavy region like PJM.</p>
            <p>However, because clean energy is so much cheaper to build and deploy in ERCOT, the cost per ton of CO2 avoided is often competitive with or better than coal-heavy regions despite the lower per-MWh displacement. Think of it this way: each dollar buys fewer tons in Texas, but each ton costs fewer dollars. The net effect depends on the threshold target.</p>
            <p>At lower thresholds (75-85%), ERCOT offers some of the cheapest abatement in the country -- well below $50/ton, competitive with compliance carbon prices in most markets. The marginal abatement cost rises more gradually than in other regions through the mid-range (85-95%), thanks to the availability of cost-effective CCS-CCGT as a bridge technology. The steepest cost escalation happens in the 97-100% range, where LDES and additional clean firm must cover the rarest and most challenging hours.</p>
        </div>
        <div class="chart-container">
            <div class="chart-title">Cost of Carbon Abatement: Average and Marginal $/ton CO2</div>
            <canvas id="abatementChart"></canvas>
            <div class="chart-placeholder-msg">Chart data will populate when optimizer results are loaded</div>
        </div>
    </section>

    <!-- SECTION 7: Key Insights -->
    <section class="scroll-section">
        <span class="section-number">Section 7</span>
        <h2 class="section-title">Key Insights: What Makes ERCOT Unique</h2>
        <div class="section-narrative">
            <p>ERCOT is the low-cost leader among the five regions we study, but cost is only part of the story. Here are the distinctive features that shape hourly clean energy strategy in Texas:</p>
        </div>
        <ul class="insights-list">
            <li><strong>Wind is king, and it is cheap.</strong> At $40/MWh (Medium), ERCOT has the lowest wind costs of any major U.S. grid region. Wind dominates the optimal mix at every threshold, providing the foundation on which all other resources are layered. Any procurement strategy in ERCOT should start with wind.</li>
            <li><strong>CCS-CCGT is a uniquely Texan advantage.</strong> The Gulf Coast geology, existing pipeline infrastructure, and proximity to Class VI sequestration wells give ERCOT the lowest CCS costs in the country ($71/MWh at Medium, net of 45Q). This technology fills a critical role as a dispatchable clean resource in the 88-100% range -- a role that other regions must fill with more expensive alternatives.</li>
            <li><strong>The absence of hydro changes the storage equation.</strong> With only 0.1% hydro generation, ERCOT lacks the natural battery that regions like CAISO and NYISO rely on. This means storage technologies -- both batteries and LDES -- must do more work, and LDES enters the optimal mix slightly earlier than in hydro-rich regions.</li>
            <li><strong>Multi-day wind variability is the binding constraint.</strong> The hardest hours to decarbonize in ERCOT are not nighttime hours (wind often blows at night) but extended calm periods when high-pressure systems suppress wind output for 2-5 days. Solving this problem requires either LDES, clean firm resources, or significant wind overbuild -- and the optimizer typically deploys a mix of all three.</li>
            <li><strong>Low fuel-switching elasticity limits gas price impact on emissions.</strong> Because ERCOT has already largely retired its coal fleet, changes in natural gas prices do not trigger significant shifts in the grid's emission rate. This is good news for emission certainty but means there is no cheap "switch coal to gas" carbon reduction available.</li>
        </ul>
    </section>

    <!-- SECTION 8: How This Region Compares -->
    <section class="scroll-section">
        <span class="section-number">Section 8</span>
        <h2 class="section-title">How ERCOT Compares to Other Regions</h2>
        <div class="section-narrative">
            <p>In the landscape of U.S. electricity markets, ERCOT is the low-cost outlier. Its combination of cheap wind, cheap gas, cheap labor, and favorable geology for CCS makes it the most affordable region for achieving hourly clean energy targets at nearly every threshold. The total cost to reach 90% hourly clean energy in ERCOT is substantially lower than in any other region we study.</p>
            <p>Where ERCOT falls short is in resource diversity. CAISO has solar, wind, hydro, and geothermal. PJM has a massive nuclear fleet. NYISO has nuclear plus significant hydro. ERCOT is heavily dependent on wind, which makes it more exposed to wind variability risk. This is not necessarily a problem -- it just means the Texas strategy requires more deliberate planning around wind intermittency than other regions need for their primary resource.</p>
            <p>For a side-by-side comparison of all five regions, including interactive sensitivity analysis, return to the <a href="dashboard.html" style="color: var(--accent-blue); font-weight: 600;">main dashboard</a>.</p>
        </div>
        <div class="chart-container">
            <div class="chart-title">ERCOT vs. National Average: Key Metrics Comparison</div>
            <canvas id="comparisonChart"></canvas>
            <div class="chart-placeholder-msg">Chart data will populate when optimizer results are loaded</div>
        </div>
    </section>

</main>

<!-- ========== FOOTER ========== -->
<footer class="page-footer">
    <div class="footer-links">
        <a href="dashboard.html">Back to Dashboard</a>
        <a href="optimizer_methodology.html">Methodology</a>
        <a href="research_paper.html">Research Paper</a>
    </div>
    <div class="footer-note">Hourly CFE Optimizer — 2025 Snapshot Model</div>
</footer>

<!-- ========== BOTTOM ACCENT BAR ========== -->
<div class="bottom-banner"></div>

<!-- ========== DATA-DRIVEN CHARTS ========== -->
<script>
(function() {
    const REGION = 'ERCOT';
    const COLORS = {
        clean_firm: '#1E3A5F',
        solar: '#F59E0B',
        wind: '#22C55E',
        ccs_ccgt: '#6366F1',
        hydro: '#0EA5E9',
        battery: '#EF4444',
        ldes: '#8B5CF6'
    };
    const EMISSION_RATES = {
        CAISO: 0.37, ERCOT: 0.41, PJM: 0.55, NYISO: 0.37, NEISO: 0.40
    };

    Chart.defaults.font.family = "'Plus Jakarta Sans', 'Helvetica Neue', Arial, sans-serif";
    Chart.defaults.plugins.datalabels = { display: false };

    function hidePlaceholder(canvasId) {
        const canvas = document.getElementById(canvasId);
        if (canvas && canvas.parentElement) {
            const msg = canvas.parentElement.querySelector('.chart-placeholder-msg');
            if (msg) msg.style.display = 'none';
        }
    }

    function showError(canvasId, message) {
        const canvas = document.getElementById(canvasId);
        if (canvas && canvas.parentElement) {
            const msg = canvas.parentElement.querySelector('.chart-placeholder-msg');
            if (msg) { msg.textContent = message; msg.style.display = 'block'; }
        }
    }

    fetch('overprocure_results.json')
        .then(r => { if (!r.ok) throw new Error('Failed to load results'); return r.json(); })
        .then(data => {
            const config = data.config;
            const regionData = data.results[REGION];
            if (!regionData) throw new Error('Region data not found');

            const thresholds = config.thresholds;
            const thresholdLabels = thresholds.map(t => t + '%');
            const gridMix = config.grid_mix_shares[REGION];
            const wholesalePrice = config.wholesale_prices[REGION];

            const costData = [];
            const mixData = { clean_firm: [], solar: [], wind: [], hydro: [] };
            const storageData = [];
            const costBreakdowns = [];

            thresholds.forEach(t => {
                const td = regionData.thresholds[String(t)];
                if (td) {
                    costData.push(td.costs.effective_cost_per_useful_mwh);
                    storageData.push(td.storage_dispatch_pct);
                    costBreakdowns.push(td.costs.resource_costs);
                    for (const res of ['clean_firm', 'solar', 'wind', 'hydro']) {
                        mixData[res].push(td.resource_mix[res] || 0);
                    }
                }
            });

            // ========== CHART 1: Baseline hourly clean energy ==========
            hidePlaceholder('baselineChart');
            const totalClean = gridMix.clean_firm + gridMix.solar + gridMix.wind + gridMix.hydro;
            const hours = Array.from({length: 24}, (_, i) => i);
            const hourLabels = hours.map(h => {
                const ampm = h < 12 ? 'AM' : 'PM';
                const hr = h === 0 ? 12 : (h > 12 ? h - 12 : h);
                return hr + ampm;
            });
            // ERCOT: wind peaks at night, solar during day, minimal hydro
            const hourlyClean = hours.map(h => {
                const solarFactor = Math.max(0, Math.sin(Math.PI * (h - 6) / 12));
                const solarContrib = gridMix.solar * solarFactor * 1.8;
                // Wind stronger at night in Texas
                const windFactor = 0.6 + 0.5 * Math.cos(Math.PI * (h - 2) / 12);
                const windContrib = gridMix.wind * windFactor;
                const firmContrib = gridMix.clean_firm;
                const hydroContrib = gridMix.hydro;
                return Math.min(100, solarContrib + windContrib + firmContrib + hydroContrib);
            });

            new Chart(document.getElementById('baselineChart'), {
                type: 'line',
                data: {
                    labels: hourLabels,
                    datasets: [{
                        label: 'Clean Energy %',
                        data: hourlyClean,
                        borderColor: '#22C55E',
                        backgroundColor: 'rgba(34,197,94,0.15)',
                        fill: true, tension: 0.4, pointRadius: 3,
                        pointBackgroundColor: '#22C55E', borderWidth: 2.5
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        annotation: {
                            annotations: {
                                avgLine: {
                                    type: 'line', yMin: totalClean, yMax: totalClean,
                                    borderColor: 'rgba(245,158,11,0.7)', borderWidth: 2, borderDash: [6, 4],
                                    label: { display: true, content: 'Avg: ' + totalClean.toFixed(1) + '%', position: 'end', backgroundColor: 'rgba(245,158,11,0.85)', color: '#fff', font: { size: 11, weight: '600' } }
                                }
                            }
                        },
                        tooltip: { callbacks: { label: ctx => ctx.parsed.y.toFixed(1) + '% clean' } }
                    },
                    scales: {
                        y: { beginAtZero: true, max: 100, title: { display: true, text: 'Clean Energy %' }, grid: { color: 'rgba(0,0,0,0.06)' } },
                        x: { title: { display: true, text: 'Hour of Day' }, grid: { display: false } }
                    }
                }
            });

            // ========== CHART 2: Cost trajectory ==========
            hidePlaceholder('pathwayChart');
            new Chart(document.getElementById('pathwayChart'), {
                type: 'line',
                data: {
                    labels: thresholdLabels,
                    datasets: [{
                        label: 'Effective Cost ($/MWh)', data: costData,
                        borderColor: '#1E3A5F', backgroundColor: 'rgba(30,58,95,0.12)', fill: true,
                        tension: 0.3, pointRadius: 5, pointBackgroundColor: '#1E3A5F',
                        pointBorderColor: '#fff', pointBorderWidth: 2, borderWidth: 3
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        annotation: {
                            annotations: {
                                wholesale: {
                                    type: 'line', yMin: wholesalePrice, yMax: wholesalePrice,
                                    borderColor: 'rgba(107,114,128,0.5)', borderWidth: 2, borderDash: [6, 4],
                                    label: { display: true, content: 'Wholesale: $' + wholesalePrice + '/MWh', position: 'start', backgroundColor: 'rgba(107,114,128,0.8)', color: '#fff', font: { size: 11, weight: '600' } }
                                }
                            }
                        },
                        tooltip: { callbacks: { label: ctx => '$' + ctx.parsed.y.toFixed(2) + '/MWh' } }
                    },
                    scales: {
                        y: { beginAtZero: false, title: { display: true, text: 'Effective Cost ($/MWh)' }, grid: { color: 'rgba(0,0,0,0.06)' } },
                        x: { title: { display: true, text: 'Hourly Clean Energy Target' }, grid: { display: false } }
                    }
                }
            });

            // ========== CHART 3: Resource mix evolution ==========
            hidePlaceholder('mixEvolutionChart');
            new Chart(document.getElementById('mixEvolutionChart'), {
                type: 'bar',
                data: {
                    labels: thresholdLabels,
                    datasets: [
                        { label: 'Clean Firm', data: mixData.clean_firm, backgroundColor: COLORS.clean_firm },
                        { label: 'Solar', data: mixData.solar, backgroundColor: COLORS.solar },
                        { label: 'Wind', data: mixData.wind, backgroundColor: COLORS.wind },
                        { label: 'Hydro', data: mixData.hydro, backgroundColor: COLORS.hydro }
                    ]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom', labels: { usePointStyle: true, pointStyle: 'rectRounded', padding: 16, font: { size: 12 } } },
                        tooltip: { callbacks: { label: ctx => ctx.dataset.label + ': ' + ctx.parsed.y + '%' } }
                    },
                    scales: {
                        y: { stacked: true, beginAtZero: true, max: 100, title: { display: true, text: 'Resource Mix (%)' }, grid: { color: 'rgba(0,0,0,0.06)' } },
                        x: { stacked: true, title: { display: true, text: 'Hourly Clean Energy Target' }, grid: { display: false } }
                    }
                }
            });

            // ========== CHART 4: Sensitivity (cost breakdown by resource) ==========
            hidePlaceholder('sensitivityChart');
            const sensitivityThresholds = [75, 85, 95, 100];
            const sensLabels = sensitivityThresholds.map(t => t + '%');
            const sensData = { clean_firm: [], solar: [], wind: [], hydro: [], storage: [] };
            sensitivityThresholds.forEach(t => {
                const td = regionData.thresholds[String(t)];
                if (td) {
                    const rc = td.costs.resource_costs;
                    sensData.clean_firm.push(rc.clean_firm ? rc.clean_firm.cost_per_demand_mwh : 0);
                    sensData.solar.push(rc.solar ? (rc.solar.cost_per_demand_mwh || rc.solar.cost || 0) : 0);
                    sensData.wind.push(rc.wind ? (rc.wind.cost_per_demand_mwh || rc.wind.cost || 0) : 0);
                    sensData.hydro.push(rc.hydro ? (rc.hydro.cost_per_demand_mwh || 0) : 0);
                    sensData.storage.push(rc.storage ? rc.storage.cost_per_demand_mwh : 0);
                }
            });

            new Chart(document.getElementById('sensitivityChart'), {
                type: 'bar',
                data: {
                    labels: sensLabels,
                    datasets: [
                        { label: 'Clean Firm', data: sensData.clean_firm, backgroundColor: COLORS.clean_firm },
                        { label: 'Solar', data: sensData.solar, backgroundColor: COLORS.solar },
                        { label: 'Wind', data: sensData.wind, backgroundColor: COLORS.wind },
                        { label: 'Hydro', data: sensData.hydro, backgroundColor: COLORS.hydro },
                        { label: 'Storage', data: sensData.storage, backgroundColor: COLORS.battery }
                    ]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom', labels: { usePointStyle: true, pointStyle: 'rectRounded', padding: 16, font: { size: 12 } } },
                        tooltip: { callbacks: { label: ctx => ctx.dataset.label + ': $' + ctx.parsed.y.toFixed(2) + '/MWh' } }
                    },
                    scales: {
                        y: { stacked: true, beginAtZero: true, title: { display: true, text: 'Cost per MWh of Demand ($/MWh)' }, grid: { color: 'rgba(0,0,0,0.06)' } },
                        x: { stacked: true, title: { display: true, text: 'Hourly Clean Energy Target' }, grid: { display: false } }
                    }
                }
            });

            // ========== CHART 5: Storage deployment ==========
            hidePlaceholder('storageChart');
            const batteryPcts = [];
            const ldesPcts = [];
            thresholds.forEach((t, i) => {
                const total = storageData[i] || 0;
                if (t >= 93) {
                    const ldesShare = Math.min(total, total * ((t - 88) / 15));
                    ldesPcts.push(parseFloat(ldesShare.toFixed(1)));
                    batteryPcts.push(parseFloat((total - ldesShare).toFixed(1)));
                } else {
                    batteryPcts.push(total);
                    ldesPcts.push(0);
                }
            });

            new Chart(document.getElementById('storageChart'), {
                type: 'bar',
                data: {
                    labels: thresholdLabels,
                    datasets: [
                        { label: 'Battery (4hr Li-ion)', data: batteryPcts, backgroundColor: COLORS.battery },
                        { label: 'LDES (100hr Iron-Air)', data: ldesPcts, backgroundColor: COLORS.ldes }
                    ]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom', labels: { usePointStyle: true, pointStyle: 'rectRounded', padding: 16, font: { size: 12 } } },
                        tooltip: { callbacks: { label: ctx => ctx.dataset.label + ': ' + ctx.parsed.y + '% of demand' } }
                    },
                    scales: {
                        y: { stacked: true, beginAtZero: true, title: { display: true, text: 'Storage Dispatch (% of Demand)' }, grid: { color: 'rgba(0,0,0,0.06)' } },
                        x: { stacked: true, title: { display: true, text: 'Hourly Clean Energy Target' }, grid: { display: false } }
                    }
                }
            });

            // ========== CHART 6: CO2 Abatement ==========
            hidePlaceholder('abatementChart');
            const emissionRate = EMISSION_RATES[REGION];
            const avgAbatement = [];
            const margAbatement = [];
            thresholds.forEach((t, i) => {
                const td = regionData.thresholds[String(t)];
                if (!td) return;
                const cleanPct = t / 100;
                const incrementalCost = td.costs.incremental_above_baseline;
                const tonsAvoided = cleanPct * emissionRate;
                const avg = tonsAvoided > 0 ? incrementalCost / tonsAvoided : 0;
                avgAbatement.push(parseFloat(avg.toFixed(1)));
                if (i > 0) {
                    const prevTd = regionData.thresholds[String(thresholds[i - 1])];
                    if (prevTd) {
                        const deltaCost = td.costs.effective_cost_per_useful_mwh - prevTd.costs.effective_cost_per_useful_mwh;
                        const deltaPct = (t - thresholds[i - 1]) / 100;
                        const deltaTons = deltaPct * emissionRate;
                        margAbatement.push(parseFloat((deltaTons > 0 ? deltaCost / deltaTons : 0).toFixed(1)));
                    } else { margAbatement.push(0); }
                } else { margAbatement.push(avgAbatement[0]); }
            });

            new Chart(document.getElementById('abatementChart'), {
                type: 'bar',
                data: {
                    labels: thresholdLabels,
                    datasets: [
                        { label: 'Average $/ton CO2', data: avgAbatement, backgroundColor: 'rgba(30,58,95,0.75)', borderColor: '#1E3A5F', borderWidth: 1, order: 2 },
                        { label: 'Marginal $/ton CO2', data: margAbatement, type: 'line', borderColor: '#EF4444', backgroundColor: 'rgba(239,68,68,0.1)', pointBackgroundColor: '#EF4444', pointBorderColor: '#fff', pointBorderWidth: 2, pointRadius: 5, borderWidth: 2.5, tension: 0.3, fill: false, order: 1 }
                    ]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom', labels: { usePointStyle: true, padding: 16, font: { size: 12 } } },
                        tooltip: { callbacks: { label: ctx => ctx.dataset.label + ': $' + ctx.parsed.y.toFixed(0) + '/ton' } }
                    },
                    scales: {
                        y: { beginAtZero: true, title: { display: true, text: 'Abatement Cost ($/ton CO2)' }, grid: { color: 'rgba(0,0,0,0.06)' } },
                        x: { title: { display: true, text: 'Hourly Clean Energy Target' }, grid: { display: false } }
                    }
                }
            });

            // ========== CHART 7: Regional comparison ==========
            hidePlaceholder('comparisonChart');
            const allRegions = ['CAISO', 'ERCOT', 'PJM', 'NYISO', 'NEISO'];
            const compThresh = '90';
            const regionCosts = []; const regionLabels = []; const barColors = [];
            allRegions.forEach(r => {
                const rd = data.results[r];
                const td = rd ? rd.thresholds[compThresh] : null;
                if (td) {
                    regionLabels.push(r);
                    regionCosts.push(td.costs.effective_cost_per_useful_mwh);
                    barColors.push(r === REGION ? '#22C55E' : 'rgba(30,58,95,0.45)');
                }
            });
            const nationalAvgCost = regionCosts.reduce((a, b) => a + b, 0) / regionCosts.length;

            new Chart(document.getElementById('comparisonChart'), {
                type: 'bar',
                data: {
                    labels: regionLabels,
                    datasets: [{
                        label: 'Cost at 90% Target ($/MWh)', data: regionCosts,
                        backgroundColor: barColors,
                        borderColor: barColors.map(c => c === '#22C55E' ? '#16A34A' : 'rgba(30,58,95,0.6)'),
                        borderWidth: 1, borderRadius: 4
                    }]
                },
                options: {
                    indexAxis: 'y', responsive: true, maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        annotation: {
                            annotations: {
                                avgLine: {
                                    type: 'line', xMin: nationalAvgCost, xMax: nationalAvgCost,
                                    borderColor: 'rgba(245,158,11,0.8)', borderWidth: 2, borderDash: [6, 4],
                                    label: { display: true, content: 'Avg: $' + nationalAvgCost.toFixed(0), position: 'start', backgroundColor: 'rgba(245,158,11,0.85)', color: '#fff', font: { size: 11, weight: '600' } }
                                }
                            }
                        },
                        tooltip: { callbacks: { label: ctx => '$' + ctx.parsed.x.toFixed(2) + '/MWh at 90% target' } }
                    },
                    scales: {
                        x: { beginAtZero: true, title: { display: true, text: 'Effective Cost ($/MWh)' }, grid: { color: 'rgba(0,0,0,0.06)' } },
                        y: { grid: { display: false } }
                    }
                }
            });

        })
        .catch(err => {
            console.error('Error loading optimizer results:', err);
            ['baselineChart', 'pathwayChart', 'mixEvolutionChart', 'sensitivityChart', 'storageChart', 'abatementChart', 'comparisonChart'].forEach(id => {
                showError(id, 'Unable to load optimizer results. Please ensure overprocure_results.json is available.');
            });
        });
})();

// Scroll-triggered reveal animations
const revealObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.classList.add('revealed');
        }
    });
}, { threshold: 0.08, rootMargin: '0px 0px -60px 0px' });

// Apply scroll-reveal to major content sections
document.querySelectorAll('.scroll-section, .chart-container, .insights-list, .stat-callout, .section-title, .section-narrative, .stat-box').forEach((el, i) => {
    el.classList.add('scroll-reveal');
    if (i % 3 === 1) el.classList.add('reveal-delay-1');
    if (i % 3 === 2) el.classList.add('reveal-delay-2');
    revealObserver.observe(el);
});
</script>
</body>
</html>
