<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="robots" content="noindex, nofollow">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Consequential Accounting — The 8,760 Problem</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700&family=Rajdhani:wght@400;500;600;700&family=Barlow+Semi+Condensed:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles/shared.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
<style>
body { background: #0B1120; }

/* ========== FOOTER ========== */
.page-footer {
    background: #0F1A2E;
    color: rgba(255,255,255,0.7);
    padding: 32px 24px;
    text-align: center;
}
.footer-links { display: flex; flex-wrap: wrap; gap: 16px 24px; justify-content: center; margin-bottom: 12px; }
.footer-links a {
    color: rgba(255,255,255,0.65);
    text-decoration: none;
    font-size: 0.85rem;
    font-weight: 500;
    transition: color 0.2s;
    min-height: 44px;
    display: inline-flex;
    align-items: center;
    padding: 8px 4px;
}
.footer-links a:hover { color: #ffffff; }
.footer-note { font-size: 0.78rem; color: rgba(255,255,255,0.4); }
.bottom-banner {
    height: 4px;
    background: linear-gradient(90deg, #1A2744 0%, #0EA5E9 25%, #22C55E 50%, #F59E0B 75%, #EF4444 100%);
}

/* ========== HERO ========== */
.hero-overview {
    background: linear-gradient(180deg, #0B1120 0%, #13203D 100%);
    position: relative;
    overflow: hidden;
    padding: 48px 24px 56px;
}
.hero-overview::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse at 30% 20%, rgba(14,165,233,0.08) 0%, transparent 60%),
                radial-gradient(ellipse at 70% 80%, rgba(245,158,11,0.06) 0%, transparent 60%);
    pointer-events: none;
}
.hero-inner {
    position: relative;
    max-width: 1320px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 48px;
    align-items: center;
}
.hero-text h2 {
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 2rem;
    font-weight: 800;
    color: #fff;
    margin-bottom: 16px;
    line-height: 1.2;
    letter-spacing: -0.5px;
}
.hero-text p {
    font-size: 0.95rem;
    color: rgba(255,255,255,0.75);
    line-height: 1.75;
    margin-bottom: 16px;
}
.hero-text .hero-lead {
    font-size: 1.05rem;
    color: rgba(255,255,255,0.85);
    font-weight: 500;
}

/* ========== COUNTER CARDS ========== */
.counter-row {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    margin: 24px 0 0;
}
.counter-card {
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 12px;
    padding: 16px 14px;
    text-align: center;
    flex: 1;
    min-width: 110px;
}
.counter-val {
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 1.8rem;
    font-weight: 800;
    color: #0EA5E9;
    line-height: 1;
    margin-bottom: 4px;
}
.counter-val.green { color: #22C55E; }
.counter-val.amber { color: #F59E0B; }
.counter-val.red { color: #EF4444; }
.counter-lbl {
    font-size: 0.72rem;
    color: rgba(255,255,255,0.5);
    font-weight: 600;
    letter-spacing: 0.3px;
    text-transform: uppercase;
}

/* ========== COMPARISON VISUAL ========== */
.comparison-visual {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 16px;
    align-items: stretch;
    max-width: 680px;
    margin: 0 auto;
}
.compare-box {
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 14px;
    padding: 20px 16px;
    text-align: center;
}
.compare-box.attr { border-color: rgba(239,68,68,0.3); }
.compare-box.conseq { border-color: rgba(34,197,94,0.3); }
.compare-box h4 {
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 0.82rem;
    letter-spacing: 0.04em;
    text-transform: uppercase;
    margin-bottom: 10px;
}
.compare-box.attr h4 { color: #EF4444; }
.compare-box.conseq h4 { color: #22C55E; }
.compare-box p {
    font-size: 0.82rem;
    color: rgba(255,255,255,0.6);
    line-height: 1.6;
}
.compare-vs {
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 1.2rem;
    font-weight: 700;
    color: rgba(255,255,255,0.3);
}

/* ========== SECTION HEADERS ========== */
.section-header {
    max-width: 900px;
    margin: 0 auto;
    padding: 56px 24px 0;
    text-align: center;
}
.section-number {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: rgba(14,165,233,0.15);
    color: #0EA5E9;
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 0.9rem;
    font-weight: 700;
    margin-bottom: 12px;
}
.section-header h2 {
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 1.6rem;
    font-weight: 800;
    color: #fff;
    margin-bottom: 10px;
    letter-spacing: -0.3px;
}
.section-header p {
    font-size: 0.9rem;
    color: rgba(255,255,255,0.55);
    line-height: 1.65;
    max-width: 700px;
    margin: 0 auto;
}

/* ========== CONTENT SECTIONS ========== */
.concept-section {
    max-width: 1100px;
    margin: 0 auto;
    padding: 32px 24px 48px;
}
.concept-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
}
.concept-card {
    background: rgba(15,26,46,0.95);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 14px;
    padding: 24px 20px;
}
.concept-card h3 {
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 0.95rem;
    font-weight: 700;
    color: #fff;
    margin-bottom: 10px;
    letter-spacing: 0.02em;
}
.concept-card p, .concept-card li {
    font-size: 0.85rem;
    color: rgba(255,255,255,0.65);
    line-height: 1.7;
}
.concept-card ul {
    list-style: none;
    padding: 0;
    margin: 8px 0 0;
}
.concept-card li {
    padding: 4px 0 4px 16px;
    position: relative;
}
.concept-card li::before {
    content: '→';
    position: absolute;
    left: 0;
    color: rgba(255,255,255,0.3);
}

/* ========== FRAMEWORK TIMELINE ========== */
.timeline-section {
    max-width: 900px;
    margin: 0 auto;
    padding: 32px 24px 48px;
}
.timeline {
    position: relative;
    padding-left: 32px;
}
.timeline::before {
    content: '';
    position: absolute;
    left: 12px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: linear-gradient(180deg, #0EA5E9 0%, #22C55E 50%, #F59E0B 100%);
    border-radius: 1px;
}
.timeline-item {
    position: relative;
    padding-bottom: 28px;
}
.timeline-dot {
    position: absolute;
    left: -26px;
    top: 4px;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: #0EA5E9;
    border: 2px solid #0B1120;
}
.timeline-item:nth-child(2) .timeline-dot { background: #22C55E; }
.timeline-item:nth-child(3) .timeline-dot { background: #F59E0B; }
.timeline-item:nth-child(4) .timeline-dot { background: #E91E63; }
.timeline-item:nth-child(5) .timeline-dot { background: #8B5CF6; }
.timeline-year {
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 0.78rem;
    font-weight: 700;
    color: #0EA5E9;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    margin-bottom: 4px;
}
.timeline-item:nth-child(2) .timeline-year { color: #22C55E; }
.timeline-item:nth-child(3) .timeline-year { color: #F59E0B; }
.timeline-item:nth-child(4) .timeline-year { color: #E91E63; }
.timeline-item:nth-child(5) .timeline-year { color: #8B5CF6; }
.timeline-title {
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 0.92rem;
    font-weight: 700;
    color: #fff;
    margin-bottom: 4px;
}
.timeline-desc {
    font-size: 0.82rem;
    color: rgba(255,255,255,0.55);
    line-height: 1.6;
}

/* ========== CHART PANELS (STICKY) ========== */
.chart-narrative-wrap {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 24px 48px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 32px;
    align-items: start;
}
.chart-sticky {
    position: sticky;
    top: 60px;
    z-index: 10;
}
.chart-panel {
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    background: rgba(15,26,46,0.95);
    border: 1px solid rgba(74,144,217,0.2);
    border-radius: 16px;
    padding: 24px 20px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    width: 100%;
    box-sizing: border-box;
}
.chart-panel .chart-container {
    position: relative;
    width: 100%;
    height: 380px;
}
.chart-narrative {
    padding-top: 8px;
}
.chart-narrative p {
    font-size: 0.88rem;
    color: rgba(255,255,255,0.65);
    line-height: 1.75;
    margin-bottom: 16px;
}
.chart-narrative strong {
    color: rgba(255,255,255,0.9);
}
.chart-title {
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 0.85rem;
    font-weight: 700;
    color: rgba(255,255,255,0.85);
    text-align: center;
    margin-bottom: 10px;
    letter-spacing: 0.02em;
}
.chart-subtitle {
    font-size: 0.78rem;
    color: rgba(255,255,255,0.45);
    text-align: center;
    margin-bottom: 16px;
}
/* Standalone chart section (no narrative pair) */
.chart-section {
    max-width: 1100px;
    margin: 0 auto;
    padding: 0 24px 48px;
}

@media (max-width: 768px) {
    .chart-narrative-wrap {
        grid-template-columns: 1fr;
        gap: 16px;
    }
    .chart-sticky {
        position: sticky;
        top: 48px;
    }
    .chart-panel .chart-container {
        height: 300px;
    }
}
@media (max-width: 480px) {
    .chart-panel .chart-container {
        height: 260px;
    }
}

/* ========== ISO SELECTOR ========== */
.iso-selector {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
    justify-content: center;
    margin-bottom: 10px;
}
.iso-btn {
    padding: 5px 12px;
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: 6px;
    background: rgba(255,255,255,0.06);
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 0.72rem;
    font-weight: 600;
    letter-spacing: 0.5px;
    cursor: pointer;
    transition: all 0.2s;
    color: rgba(255,255,255,0.5);
    min-width: 44px;
    min-height: 34px;
}
.iso-btn:hover {
    background: rgba(14,165,233,0.12);
    border-color: rgba(14,165,233,0.3);
    color: rgba(255,255,255,0.8);
}
.iso-btn.active {
    background: rgba(14,165,233,0.2);
    color: #fff;
    border-color: rgba(14,165,233,0.4);
}

/* ========== KEY INSIGHT CALLOUT ========== */
.insight-callout {
    max-width: 900px;
    margin: 0 auto;
    padding: 0 24px 48px;
}
.insight-box {
    background: linear-gradient(135deg, rgba(14,165,233,0.08) 0%, rgba(34,197,94,0.06) 100%);
    border: 1px solid rgba(14,165,233,0.2);
    border-radius: 14px;
    padding: 28px 24px;
}
.insight-box h3 {
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    color: #0EA5E9;
    margin-bottom: 10px;
}
.insight-box p {
    font-size: 0.88rem;
    color: rgba(255,255,255,0.7);
    line-height: 1.7;
}
.insight-box .highlight {
    color: #F59E0B;
    font-weight: 600;
}

/* ========== NARRATIVE BLOCKS ========== */
.narrative-section {
    max-width: 780px;
    margin: 0 auto;
    padding: 0 24px 48px;
}
.narrative-section p {
    font-size: 0.9rem;
    color: rgba(255,255,255,0.65);
    line-height: 1.8;
    margin-bottom: 16px;
}
.narrative-section strong {
    color: rgba(255,255,255,0.9);
}

/* ========== TABLE ========== */
.comparison-table-wrap {
    max-width: 900px;
    margin: 0 auto;
    padding: 0 24px 48px;
    overflow-x: auto;
}
.comparison-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.82rem;
}
.comparison-table th {
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 0.75rem;
    font-weight: 700;
    color: rgba(255,255,255,0.5);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    padding: 10px 14px;
    text-align: left;
    border-bottom: 1px solid rgba(255,255,255,0.12);
}
.comparison-table td {
    padding: 10px 14px;
    color: rgba(255,255,255,0.7);
    border-bottom: 1px solid rgba(255,255,255,0.06);
    vertical-align: top;
}
.comparison-table tr:hover td {
    background: rgba(255,255,255,0.03);
}
.badge {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 0.72rem;
    font-weight: 600;
}
.badge.attr { background: rgba(239,68,68,0.15); color: #EF4444; }
.badge.conseq { background: rgba(34,197,94,0.15); color: #22C55E; }
.badge.both { background: rgba(14,165,233,0.15); color: #0EA5E9; }

/* ========== KEY FINDINGS PYRAMID ========== */
.findings-panel {
    max-width: 1100px;
    margin: 0 auto;
    padding: 48px 24px;
}
.findings-title {
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 0.78rem;
    font-weight: 700;
    color: rgba(255,255,255,0.4);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    text-align: center;
    margin-bottom: 24px;
}
.findings-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 16px;
}
.finding-row {
    display: grid;
    gap: 16px;
}
.finding-row.top { grid-template-columns: 1fr; max-width: 700px; margin: 0 auto; }
.finding-row.mid { grid-template-columns: 1fr 1fr; }
.finding-row.base { grid-template-columns: 1fr 1fr 1fr; }
.finding-card {
    background: rgba(15,26,46,0.95);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 14px;
    padding: 20px 18px;
    position: relative;
    overflow: hidden;
}
.finding-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    border-radius: 14px 14px 0 0;
}
.finding-card.tier1::before { background: linear-gradient(90deg, #EF4444, #F59E0B); }
.finding-card.tier2::before { background: linear-gradient(90deg, #0EA5E9, #22C55E); }
.finding-card.tier3::before { background: linear-gradient(90deg, #8B5CF6, #0EA5E9); }
.finding-num {
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 1.6rem;
    font-weight: 800;
    line-height: 1;
    margin-bottom: 6px;
}
.finding-num.red { color: #EF4444; }
.finding-num.amber { color: #F59E0B; }
.finding-num.green { color: #22C55E; }
.finding-num.blue { color: #0EA5E9; }
.finding-num.purple { color: #8B5CF6; }
.finding-label {
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 0.78rem;
    font-weight: 700;
    color: rgba(255,255,255,0.7);
    margin-bottom: 4px;
}
.finding-desc {
    font-size: 0.78rem;
    color: rgba(255,255,255,0.45);
    line-height: 1.5;
}

@media (max-width: 768px) {
    .finding-row.mid { grid-template-columns: 1fr; }
    .finding-row.base { grid-template-columns: 1fr; }
}

/* ========== SCROLL ANIMATIONS ========== */
.fade-in {
    opacity: 0;
    transform: translateY(24px);
    transition: opacity 0.7s ease-out, transform 0.7s ease-out;
}
.fade-in.visible {
    opacity: 1;
    transform: translateY(0);
}

/* ========== SOURCES ========== */
.sources-section {
    max-width: 780px;
    margin: 0 auto;
    padding: 32px 24px 48px;
    border-top: 1px solid rgba(255,255,255,0.08);
}
.sources-section h3 {
    font-family: 'Franklin Gothic Demi', 'Barlow Semi Condensed', sans-serif;
    font-size: 0.85rem;
    font-weight: 700;
    color: rgba(255,255,255,0.5);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    margin-bottom: 16px;
}
.sources-section ol {
    list-style: decimal;
    padding-left: 20px;
}
.sources-section li {
    font-size: 0.78rem;
    color: rgba(255,255,255,0.45);
    line-height: 1.6;
    margin-bottom: 6px;
}
.sources-section a {
    color: rgba(14,165,233,0.7);
    text-decoration: none;
}
.sources-section a:hover { text-decoration: underline; }

/* ========== RESPONSIVE ========== */
@media (max-width: 768px) {
    .hero-inner { grid-template-columns: 1fr; gap: 24px; }
    .hero-text h2 { font-size: 1.5rem; }
    .comparison-visual { grid-template-columns: 1fr; gap: 12px; }
    .compare-vs { padding: 4px 0; }
    .concept-grid { grid-template-columns: 1fr; }
    .section-header h2 { font-size: 1.35rem; }
    .chart-panel .chart-container { min-height: 280px; }
    .counter-row { gap: 8px; }
    .counter-card { min-width: 90px; padding: 12px 10px; }
    .counter-val { font-size: 1.4rem; }
}
@media (max-width: 480px) {
    .hero-text h2 { font-size: 1.3rem; }
    .section-header h2 { font-size: 1.2rem; }
    .section-header p { font-size: 0.82rem; }
}
</style>
</head>
<body>

<!-- ============ NAV ============ -->
<nav id="topNav"></nav>
<script src="js/nav.js"></script>

<!-- ============ HERO ============ -->
<section class="hero-overview">
<div class="hero-inner">
    <div class="hero-text">
        <h2>From Accounting to Impact: Why How You Count Carbon Matters</h2>
        <p class="hero-lead">Most corporate clean energy claims rely on annual REC matching — an accounting method that says nothing about whether emissions actually decreased. Consequential accounting asks the harder question: did your procurement decisions change the grid?</p>
        <p>The difference between "we bought enough certificates" and "we actually displaced fossil generation" is the difference between a spreadsheet exercise and real climate impact. Hourly matching — the approach behind this project — bridges that gap.</p>
        <div class="counter-row">
            <div class="counter-card">
                <div class="counter-val amber" data-target="97" data-suffix="%">0%</div>
                <div class="counter-lbl">Fortune 500 Use<br>GHG Protocol</div>
            </div>
            <div class="counter-card">
                <div class="counter-val red" data-target="0" data-suffix="">~0</div>
                <div class="counter-lbl">Emissions Impact<br>of Annual RECs</div>
            </div>
            <div class="counter-card">
                <div class="counter-val green" data-target="8760" data-suffix="">0</div>
                <div class="counter-lbl">Hours/Year That<br>Matter for CFE</div>
            </div>
            <div class="counter-card">
                <div class="counter-val" data-target="2027" data-suffix="">2027</div>
                <div class="counter-lbl">GHG Protocol<br>Hourly Standard</div>
            </div>
        </div>
    </div>

    <div class="comparison-visual">
        <div class="compare-box attr">
            <h4>Attributional</h4>
            <p>"We purchased RECs equal to 100% of our annual consumption."</p>
            <p style="margin-top:10px; font-size:0.75rem; color:rgba(239,68,68,0.7);">✗ Doesn't track timing<br>✗ Doesn't verify additionality<br>✗ Allows double-counting</p>
        </div>
        <div class="compare-vs">vs</div>
        <div class="compare-box conseq">
            <h4>Consequential</h4>
            <p>"Our procurement displaced 45,000 tons of fossil generation in hours when the grid needed it most."</p>
            <p style="margin-top:10px; font-size:0.75rem; color:rgba(34,197,94,0.7);">✓ Hour-by-hour matching<br>✓ Measures real displacement<br>✓ Location-specific impact</p>
        </div>
    </div>
</div>
</section>

<!-- ============ KEY FINDINGS PYRAMID ============ -->
<section class="findings-panel fade-in">
    <div class="findings-title">Key Findings — Top Down</div>
    <div class="findings-grid">
        <!-- Tier 1: The headline -->
        <div class="finding-row top">
            <div class="finding-card tier1">
                <div class="finding-num red">~0 tCO₂</div>
                <div class="finding-label">Annual REC matching has near-zero consequential emissions impact</div>
                <div class="finding-desc">Research by Xu et al. and WattTime confirms that the dominant corporate clean energy accounting method — buying annual RECs — does not measurably reduce grid emissions. The accounting says "clean" but the physics says nothing changed.</div>
            </div>
        </div>
        <!-- Tier 2: The two pillars -->
        <div class="finding-row mid">
            <div class="finding-card tier2">
                <div class="finding-num amber">2–5×</div>
                <div class="finding-label">Cost premium for the last 10% of hourly CFE</div>
                <div class="finding-desc">Getting from 90% → 100% hourly matching costs 2–5× more per ton than the first 90%. These hard hours — winter evenings, low-wind periods — are exactly what attributional accounting ignores.</div>
            </div>
            <div class="finding-card tier2">
                <div class="finding-num green">Firm Power</div>
                <div class="finding-label">Hourly matching reveals the need for dispatchable clean resources</div>
                <div class="finding-desc">When forced to match every hour, optimization consistently selects nuclear, CCS-CCGT, or geothermal alongside renewables. Solar and wind alone can't cover the 8,760.</div>
            </div>
        </div>
        <!-- Tier 3: Supporting details -->
        <div class="finding-row base">
            <div class="finding-card tier3">
                <div class="finding-num blue">2027</div>
                <div class="finding-label">GHG Protocol hourly standard expected</div>
                <div class="finding-desc">The revised Scope 2 guidance will require hourly, location-matched CFE — transforming corporate reporting from annual bookkeeping to physics-aligned accounting.</div>
            </div>
            <div class="finding-card tier3">
                <div class="finding-num purple">140+</div>
                <div class="finding-label">UN 24/7 CFE Compact signatories</div>
                <div class="finding-desc">Including the U.S. Government (COP28), Google, Microsoft, and major utilities. Momentum for hourly matching is accelerating across sectors.</div>
            </div>
            <div class="finding-card tier3">
                <div class="finding-num green">T-EACs</div>
                <div class="finding-label">Granular certificates enable credible tracking</div>
                <div class="finding-desc">EnergyTag's Time-based Energy Attribute Certificates provide the infrastructure for hourly matching — tracking not just "how much" but "when and where" clean energy was generated.</div>
            </div>
        </div>
    </div>
</section>

<!-- ============ SECTION 1: The Problem ============ -->
<div class="section-header fade-in">
    <div class="section-number">1</div>
    <h2>The Accounting Gap</h2>
    <p>Current carbon accounting standards let companies claim "100% renewable" while the grid they operate on runs 60% fossil fuel — at night, in winter, during peak demand. The gap between what's reported and what's real is enormous.</p>
</div>

<section class="concept-section fade-in">
    <div class="concept-grid">
        <div class="concept-card">
            <h3>Attributional Accounting</h3>
            <p>Assigns emissions to an entity based on purchased certificates. Like allocating slices of a pie — the total adds up, but it doesn't tell you whether the pie is shrinking.</p>
            <ul>
                <li>GHG Protocol Scope 2 (market-based method)</li>
                <li>Annual matching: buy RECs ≥ consumption</li>
                <li>No temporal or locational granularity</li>
                <li>A company in New England can buy Texas wind RECs at 2 AM and claim "clean" power during a winter 6 PM gas peak</li>
            </ul>
        </div>
        <div class="concept-card">
            <h3>Consequential Accounting</h3>
            <p>Estimates the system-wide change in emissions caused by a specific action. Asks: "What would have happened without this procurement decision?"</p>
            <ul>
                <li>Marginal emissions displacement analysis</li>
                <li>Hourly matching: CFE supply = consumption each hour</li>
                <li>Location-specific grid impact</li>
                <li>Additionality requirement: new capacity, not reshuffling existing clean energy</li>
            </ul>
        </div>
    </div>
</section>

<div class="insight-callout fade-in">
    <div class="insight-box">
        <h3>Why This Matters</h3>
        <p>Research by Xu et al. (2023) and Ricks et al. (2023) found that <span class="highlight">annual REC matching has zero or near-zero consequential emissions impact</span>. Without additionality requirements, even hourly matching at up to 90% loses most of its consequential benefit. The accounting method you choose isn't just a reporting detail — it determines whether your clean energy investment drives real decarbonization.</p>
    </div>
</div>

<!-- ============ SECTION 2: The Frameworks ============ -->
<div class="section-header fade-in">
    <div class="section-number">2</div>
    <h2>The Evolving Landscape</h2>
    <p>A convergence of corporate commitments, regulatory reform, and academic research is driving the shift from annual to hourly, from attributional to consequential.</p>
</div>

<section class="timeline-section fade-in">
    <div class="timeline">
        <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-year">2020</div>
            <div class="timeline-title">Google Commits to 24/7 CFE by 2030</div>
            <div class="timeline-desc">First major company to commit to matching electricity consumption with carbon-free energy every hour of every day, on every grid where it operates. Published the CFE% metric for hourly tracking.</div>
        </div>
        <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-year">2021</div>
            <div class="timeline-title">UN 24/7 CFE Compact Launched</div>
            <div class="timeline-desc">140+ signatories including governments, corporates, and NGOs committed to advancing hourly carbon-free energy. The U.S. Government joined at COP28 in 2023, directing federal facilities toward 50% 24/7 CFE by 2030.</div>
        </div>
        <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-year">2022–23</div>
            <div class="timeline-title">EnergyTag & Granular Certificates</div>
            <div class="timeline-desc">EnergyTag develops standards for hourly energy attribute tracking. Time-based Energy Attribute Certificates (T-EACs) enable granular trading — not just "how much" but "when and where" clean energy was generated.</div>
        </div>
        <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-year">2024–25</div>
            <div class="timeline-title">GHG Protocol Scope 2 Revision</div>
            <div class="timeline-desc">The GHG Protocol launches a Technical Working Group to revise Scope 2 guidance. Proposed changes require hourly matching and deliverability (same grid region). A separate consequential accounting sub-group develops impact-based disclosures.</div>
        </div>
        <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-year">2027</div>
            <div class="timeline-title">New Standard Expected</div>
            <div class="timeline-desc">The revised Scope 2 standard is scheduled for publication, potentially making hourly, location-matched CFE accounting the global default for corporate emissions reporting.</div>
        </div>
    </div>
</section>

<!-- ============ SECTION 3: Comparison Table ============ -->
<div class="section-header fade-in">
    <div class="section-number">3</div>
    <h2>Accounting Methods Compared</h2>
    <p>How the two approaches differ across the dimensions that matter for real climate impact.</p>
</div>

<div class="comparison-table-wrap fade-in">
<table class="comparison-table">
<thead>
<tr>
    <th>Dimension</th>
    <th>Attributional (Current)</th>
    <th>Consequential (Emerging)</th>
</tr>
</thead>
<tbody>
<tr>
    <td><strong>Core Question</strong></td>
    <td>What share of my consumption can I allocate to clean sources?</td>
    <td>Did my procurement decision reduce total system emissions?</td>
</tr>
<tr>
    <td><strong>Temporal Resolution</strong></td>
    <td>Annual <span class="badge attr">Annual</span></td>
    <td>Hourly <span class="badge conseq">Hourly</span></td>
</tr>
<tr>
    <td><strong>Locational Matching</strong></td>
    <td>National or regional market boundary</td>
    <td>Same grid region / deliverability zone</td>
</tr>
<tr>
    <td><strong>Additionality</strong></td>
    <td>Not required — existing RECs qualify</td>
    <td>Required — must drive new capacity</td>
</tr>
<tr>
    <td><strong>Double Counting</strong></td>
    <td>Possible — same clean MWh claimed by multiple parties</td>
    <td>Prevented — T-EACs retire at hourly granularity</td>
</tr>
<tr>
    <td><strong>Metric</strong></td>
    <td>% renewable (annual RECs ÷ annual MWh)</td>
    <td>Tons CO₂ displaced, marginal emissions rate</td>
</tr>
<tr>
    <td><strong>What It Reveals</strong></td>
    <td>Bookkeeping compliance</td>
    <td>Physical grid decarbonization impact</td>
</tr>
<tr>
    <td><strong>Typical Claim</strong></td>
    <td>"100% renewable energy"</td>
    <td>"Displaced 45,000 tCO₂ via 92% hourly CFE"</td>
</tr>
<tr>
    <td><strong>Standard Body</strong></td>
    <td>GHG Protocol Scope 2 (current) <span class="badge attr">Current</span></td>
    <td>GHG Protocol (2027 revision) <span class="badge conseq">Proposed</span></td>
</tr>
</tbody>
</table>
</div>

<!-- ============ SECTION 4: Hourly Matching & Our Model ============ -->
<div class="section-header fade-in">
    <div class="section-number">4</div>
    <h2>Hourly Matching: Where Physics Meets Accounting</h2>
    <p>Our 8,760-hour optimization model is inherently consequential — it optimizes real resource mixes against real grid profiles, hour by hour, to find what it actually takes to decarbonize.</p>
</div>

<section class="chart-narrative-wrap fade-in">
    <div class="chart-sticky">
        <div class="chart-panel">
            <div class="chart-title">The Hourly Matching Gap: Annual vs. Consequential CFE Cost</div>
            <div class="iso-selector" id="macIsoSelector">
                <button class="iso-btn" data-iso="CAISO">CAISO</button>
                <button class="iso-btn active" data-iso="ERCOT">ERCOT</button>
                <button class="iso-btn" data-iso="PJM">PJM</button>
                <button class="iso-btn" data-iso="NYISO">NYISO</button>
                <button class="iso-btn" data-iso="NEISO">NEISO</button>
            </div>
            <div class="chart-container">
                <canvas id="macChart"></canvas>
            </div>
        </div>
    </div>
    <div class="chart-narrative">
        <p><strong>Annual matching treats every MWh as interchangeable.</strong> A solar certificate generated at noon on a sunny June day "covers" consumption at 7 PM on a January evening when the grid runs on natural gas.</p>
        <p>The physics doesn't care about your accounting.</p>
        <p><strong>Hourly matching forces a different question:</strong> what resources do you actually need to match consumption in every hour? The answer — revealed across 21 million physics-validated resource mixes — is that you need firm, dispatchable clean power (nuclear, CCS-CCGT, geothermal) alongside variable renewables and storage.</p>
        <p>Look at the chart: the MAC curve is relatively flat through 90%, then steepens dramatically. Those final hours — winter evenings, multi-day low-wind periods, summer demand peaks — are exactly what annual accounting ignores.</p>
        <p><strong>The Last 10% Problem:</strong> getting from 90% → 100% hourly CFE costs <strong style="color:#F59E0B;">2–5× more per ton</strong> than the first 90%. These are the hours that matter most for grid decarbonization. Consequential accounting forces you to confront them, which drives better investment decisions.</p>
        <p>This is a consequential finding: it tells you what procurement decisions actually move the needle, not just what fills in a spreadsheet.</p>
    </div>
</section>

<!-- ============ SECTION 5: What This Means for Buyers ============ -->
<div class="section-header fade-in">
    <div class="section-number">5</div>
    <h2>What This Means for Clean Energy Buyers</h2>
    <p>The shift from attributional to consequential accounting will reshape corporate procurement strategy. Companies that prepare now will lead; those that don't will scramble when the rules change.</p>
</div>

<section class="concept-section fade-in">
    <div class="concept-grid">
        <div class="concept-card">
            <h3>For Corporates & Data Centers</h3>
            <ul>
                <li><strong>Audit your portfolio</strong> — what percentage of your RECs match consumption hourly and locally?</li>
                <li><strong>Invest in firm clean power</strong> — solar and wind alone can't cover 24/7; sign PPAs for nuclear, geothermal, or CCS-backed resources</li>
                <li><strong>Demand T-EACs</strong> — hourly certificates from your counterparties, not just annual bundles</li>
                <li><strong>Quantify displacement</strong> — report tons of CO₂ displaced, not just % renewable</li>
            </ul>
        </div>
        <div class="concept-card">
            <h3>For Policy & Regulation</h3>
            <ul>
                <li><strong>Adopt the revised Scope 2</strong> — prepare for hourly matching requirements before 2027</li>
                <li><strong>Mandate additionality</strong> — ensure procured clean energy represents new capacity, not reshuffled existing generation</li>
                <li><strong>Support consequential disclosure</strong> — require impact-based reporting alongside inventory accounting</li>
                <li><strong>Build T-EAC infrastructure</strong> — regional granular certificate registries are the backbone of credible hourly matching</li>
            </ul>
        </div>
    </div>
</section>

<section class="chart-narrative-wrap fade-in">
    <div class="chart-sticky">
        <div class="chart-panel">
            <div class="chart-title">Consequential Impact: MAC vs. Abatement Benchmarks</div>
            <div class="iso-selector" id="benchIsoSelector">
                <button class="iso-btn" data-iso="CAISO">CAISO</button>
                <button class="iso-btn active" data-iso="ERCOT">ERCOT</button>
                <button class="iso-btn" data-iso="PJM">PJM</button>
                <button class="iso-btn" data-iso="NYISO">NYISO</button>
                <button class="iso-btn" data-iso="NEISO">NEISO</button>
            </div>
            <div class="chart-container">
                <canvas id="benchmarkChart"></canvas>
            </div>
        </div>
    </div>
    <div class="chart-narrative">
        <p><strong>How does hourly CFE compare to other ways of reducing emissions?</strong> The bars show the marginal abatement cost of hourly clean energy matching at different thresholds — the cost per ton of CO₂ actually displaced from the grid.</p>
        <p>The horizontal lines mark key benchmarks: the <strong style="color:#2196F3;">EU ETS carbon price</strong> ($88/t), the <strong style="color:#FF9800;">EPA Social Cost of Carbon</strong> ($190/t), and the <strong style="color:#E65100;">Rennert et al. SCC</strong> ($185/t).</p>
        <p>In ERCOT, hourly CFE at 90% costs just $52/tCO₂ — well below every major carbon benchmark. Even at 95%, it's only $61/t. This means hourly clean energy procurement in favorable grids is <strong>among the most cost-effective decarbonization investments available</strong>.</p>
        <p>The story changes at 99%+, where MAC can exceed $100/t. But even there, it competes favorably with Direct Air Capture ($150–400/t) and Sustainable Aviation Fuel ($136–500/t).</p>
        <p><strong>The consequential framing matters:</strong> attributional accounting can't tell you any of this. It just says "100% renewable." Consequential accounting reveals the cost curve of real decarbonization — and shows that hourly CFE is a bargain at moderate thresholds.</p>
    </div>
</section>

<!-- ============ SOURCES ============ -->
<section class="sources-section fade-in">
    <h3>Sources & Further Reading</h3>
    <ol>
        <li>GHG Protocol, "Scope 2 Guidance" (2015; revision in progress, expected 2027). <a href="https://ghgprotocol.org/scope-2-guidance" target="_blank">ghgprotocol.org</a></li>
        <li>Clean Air Task Force, "Modernizing GHG Accounting Rules and Climate Leadership Programs" (2024). <a href="https://www.catf.us/resource/modernizing-ghg-accounting-rules/" target="_blank">catf.us</a></li>
        <li>GHG Management Institute, "The attributional-consequential distinction" (2022). <a href="https://www.tandfonline.com/doi/full/10.1080/17583004.2022.2088402" target="_blank">tandfonline.com</a></li>
        <li>EnergyTag, "Scope 2 for the Age of Deep Decarbonization" (2024). <a href="https://energytag.org/scope-2-for-the-age-of-deep-decarbonization/" target="_blank">energytag.org</a></li>
        <li>Xu et al., "System-level impacts of 24/7 carbon-free energy procurement" (2024). <a href="https://www.sciencedirect.com/science/article/pii/S2211467X24001950" target="_blank">ScienceDirect</a></li>
        <li>Ricks et al., "Minimizing emissions from grid-based hydrogen production in the United States" (2023). Environmental Research Letters.</li>
        <li>WattTime, "Hourly matching without additionality has little to no impact on emissions reductions." <a href="https://watttime.org/news-and-insights/hourly-matching-without-additionality-has-little-to-no-impact-on-emissions-reductions/" target="_blank">watttime.org</a></li>
        <li>UN Energy, "24/7 Carbon-Free Energy Compact" (2021). <a href="https://www.seforall.org/programmes/un-energy/energy-compacts/247-carbon-free-energy-compact" target="_blank">seforall.org</a></li>
        <li>RMI, "Carbon Accounting That Helps Companies Shift to Clean Energy Faster" (2024). <a href="https://rmi.org/carbon-accounting-that-helps-companies-shift-to-clean-energy-faster/" target="_blank">rmi.org</a></li>
        <li>Google, "24×7 Carbon-Free Energy." <a href="https://sustainability.google/stories/24x7/" target="_blank">sustainability.google</a></li>
    </ol>
</section>

<!-- ============ FOOTER ============ -->
<footer class="page-footer">
    <div class="footer-links">
        <a href="index.html">Home</a>
        <a href="dashboard.html">Grid Simulation</a>
        <a href="abatement_dashboard.html">CO₂ Abatement</a>
        <a href="research_paper.html">Research Paper</a>
        <a href="optimizer_methodology.html">Methodology</a>
        <a href="about.html">About</a>
    </div>
    <div class="footer-note">The 8,760 Problem — Hourly Clean Energy Optimization &amp; Consequential Impact Analysis</div>
</footer>
<div class="bottom-banner"></div>

<!-- ============ DATA ============ -->
<script src="js/shared-data.js"></script>

<!-- ============ CHARTS & INTERACTIVITY ============ -->
<script>
(function() {
'use strict';

// --- Scroll animation ---
var fadeEls = document.querySelectorAll('.fade-in');
var obs = new IntersectionObserver(function(entries) {
    entries.forEach(function(e) {
        if (e.isIntersecting) {
            e.target.classList.add('visible');
            obs.unobserve(e.target);
        }
    });
}, { threshold: 0.15 });
fadeEls.forEach(function(el) { obs.observe(el); });

// --- Animated counters ---
function animateCounters() {
    document.querySelectorAll('.counter-val[data-target]').forEach(function(el) {
        var target = parseInt(el.dataset.target);
        var suffix = el.dataset.suffix || '';
        var duration = 1200;
        var start = null;
        // Skip animation for static values like "2027"
        if (target > 2000) {
            el.textContent = target + suffix;
            return;
        }
        function step(ts) {
            if (!start) start = ts;
            var progress = Math.min((ts - start) / duration, 1);
            var eased = 1 - Math.pow(1 - progress, 3);
            el.textContent = Math.round(eased * target).toLocaleString() + suffix;
            if (progress < 1) requestAnimationFrame(step);
        }
        requestAnimationFrame(step);
    });
}
// Trigger counters when hero is visible
var heroObs = new IntersectionObserver(function(entries) {
    if (entries[0].isIntersecting) {
        animateCounters();
        heroObs.disconnect();
    }
}, { threshold: 0.3 });
heroObs.observe(document.querySelector('.hero-overview'));

// --- Chart 1: MAC curve with L/M/H fan ---
var macCtx = document.getElementById('macChart').getContext('2d');
var macChart = null;
var currentMacISO = 'ERCOT';

function buildMacChart(iso) {
    if (macChart) macChart.destroy();
    var labels = THRESHOLDS.map(function(t) { return t + '%'; });
    var med = MAC_DATA.medium[iso];
    var lo = MAC_DATA.low[iso];
    var hi = MAC_DATA.high[iso];

    // Filter out nulls (CAISO 100%)
    var validLen = med.length;
    var filteredLabels = [];
    var filteredMed = [];
    var filteredLo = [];
    var filteredHi = [];
    for (var i = 0; i < validLen; i++) {
        if (med[i] !== null) {
            filteredLabels.push(labels[i]);
            filteredMed.push(med[i]);
            filteredLo.push(lo[i] || 0);
            filteredHi.push(hi[i] || 0);
        }
    }

    macChart = new Chart(macCtx, {
        type: 'line',
        data: {
            labels: filteredLabels,
            datasets: [
                {
                    label: 'High Cost Scenario',
                    data: filteredHi,
                    borderColor: 'rgba(239,68,68,0.6)',
                    backgroundColor: 'rgba(239,68,68,0.08)',
                    fill: '+1',
                    borderWidth: 1,
                    borderDash: [4, 3],
                    pointRadius: 0,
                    tension: 0.3
                },
                {
                    label: 'Medium (Monotonic Envelope)',
                    data: filteredMed,
                    borderColor: '#0EA5E9',
                    backgroundColor: 'rgba(14,165,233,0.1)',
                    fill: false,
                    borderWidth: 2.5,
                    pointRadius: 3,
                    pointBackgroundColor: '#0EA5E9',
                    tension: 0.3
                },
                {
                    label: 'Low Cost Scenario',
                    data: filteredLo,
                    borderColor: 'rgba(34,197,94,0.6)',
                    backgroundColor: 'rgba(34,197,94,0.08)',
                    fill: '-1',
                    borderWidth: 1,
                    borderDash: [4, 3],
                    pointRadius: 0,
                    tension: 0.3
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: true,
                    position: 'bottom',
                    labels: { color: 'rgba(255,255,255,0.6)', font: { size: 11 }, padding: 16, usePointStyle: true, pointStyleWidth: 16 }
                },
                tooltip: {
                    backgroundColor: 'rgba(15,26,46,0.95)',
                    titleColor: '#fff',
                    bodyColor: 'rgba(255,255,255,0.8)',
                    borderColor: 'rgba(255,255,255,0.15)',
                    borderWidth: 1,
                    callbacks: {
                        label: function(ctx) {
                            return ctx.dataset.label + ': $' + ctx.parsed.y + '/tCO₂';
                        }
                    }
                },
                annotation: {
                    annotations: {
                        ninetyLine: {
                            type: 'line',
                            xMin: filteredLabels.indexOf('90%'),
                            xMax: filteredLabels.indexOf('90%'),
                            borderColor: 'rgba(245,158,11,0.5)',
                            borderWidth: 1.5,
                            borderDash: [6, 4],
                            label: {
                                display: true,
                                content: '90% — Hourly matching threshold',
                                position: 'start',
                                backgroundColor: 'rgba(245,158,11,0.15)',
                                color: '#F59E0B',
                                font: { size: 10, weight: 600 },
                                padding: 4
                            }
                        }
                    }
                },
                datalabels: { display: false }
            },
            scales: {
                x: {
                    grid: { color: 'rgba(255,255,255,0.05)' },
                    ticks: { color: 'rgba(255,255,255,0.5)', font: { size: 11 } },
                    title: { display: true, text: 'CFE Matching Threshold', color: 'rgba(255,255,255,0.4)', font: { size: 11 } }
                },
                y: {
                    grid: { color: 'rgba(255,255,255,0.05)' },
                    ticks: { color: 'rgba(255,255,255,0.5)', font: { size: 11 }, callback: function(v) { return '$' + v; } },
                    title: { display: true, text: 'Average MAC ($/tCO₂)', color: 'rgba(255,255,255,0.4)', font: { size: 11 } }
                }
            }
        }
    });
}

// --- Chart 2: Benchmark comparison ---
var benchCtx = document.getElementById('benchmarkChart').getContext('2d');
var benchChart = null;
var currentBenchISO = 'ERCOT';

function buildBenchmarkChart(iso) {
    if (benchChart) benchChart.destroy();

    // Get MAC values at key thresholds for this ISO
    var med = MAC_DATA.medium[iso];
    var thresholdPoints = [
        { label: '75% CFE', idx: 3 },
        { label: '90% CFE', idx: 7 },
        { label: '95% CFE', idx: 9 },
        { label: '99% CFE', idx: 11 }
    ];

    var macBars = thresholdPoints.filter(function(p) { return med[p.idx] !== null; });
    var barLabels = macBars.map(function(p) { return p.label; });
    var barValues = macBars.map(function(p) { return med[p.idx]; });
    var barColors = ['#0EA5E9', '#22C55E', '#F59E0B', '#EF4444'];

    // Benchmark lines
    var benchmarks = [
        { label: 'EU ETS ($88/t)', value: 88, color: 'rgba(33,150,243,0.6)', dash: [6,4] },
        { label: 'EPA SCC ($190/t)', value: 190, color: 'rgba(255,152,0,0.6)', dash: [6,4] },
        { label: 'Rennert SCC ($185/t)', value: 185, color: 'rgba(230,81,0,0.6)', dash: [4,3] }
    ];

    var annotations = {};
    benchmarks.forEach(function(b, i) {
        annotations['bench' + i] = {
            type: 'line',
            yMin: b.value,
            yMax: b.value,
            borderColor: b.color,
            borderWidth: 1.5,
            borderDash: b.dash,
            label: {
                display: true,
                content: b.label,
                position: 'end',
                backgroundColor: 'rgba(15,26,46,0.9)',
                color: b.color.replace('0.6', '1'),
                font: { size: 10, weight: 600 },
                padding: 3
            }
        };
    });

    benchChart = new Chart(benchCtx, {
        type: 'bar',
        data: {
            labels: barLabels,
            datasets: [{
                label: 'MAC at Threshold ($/tCO₂)',
                data: barValues,
                backgroundColor: barColors.map(function(c) { return c + '80'; }),
                borderColor: barColors,
                borderWidth: 1.5,
                borderRadius: 6,
                barPercentage: 0.6
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false },
                tooltip: {
                    backgroundColor: 'rgba(15,26,46,0.95)',
                    titleColor: '#fff',
                    bodyColor: 'rgba(255,255,255,0.8)',
                    borderColor: 'rgba(255,255,255,0.15)',
                    borderWidth: 1,
                    callbacks: {
                        label: function(ctx) {
                            return 'MAC: $' + ctx.parsed.y + '/tCO₂';
                        }
                    }
                },
                annotation: { annotations: annotations },
                datalabels: {
                    display: true,
                    color: '#fff',
                    font: { size: 11, weight: 600 },
                    anchor: 'end',
                    align: 'end',
                    formatter: function(v) { return '$' + v; }
                }
            },
            scales: {
                x: {
                    grid: { display: false },
                    ticks: { color: 'rgba(255,255,255,0.6)', font: { size: 12, weight: 600 } }
                },
                y: {
                    grid: { color: 'rgba(255,255,255,0.05)' },
                    ticks: { color: 'rgba(255,255,255,0.5)', font: { size: 11 }, callback: function(v) { return '$' + v; } },
                    title: { display: true, text: '$/tCO₂ Displaced', color: 'rgba(255,255,255,0.4)', font: { size: 11 } },
                    suggestedMax: 300
                }
            }
        },
        plugins: [ChartDataLabels]
    });
}

// --- ISO Selector Wiring ---
function wireIsoSelector(selectorId, callback, isoRef) {
    var btns = document.querySelectorAll('#' + selectorId + ' .iso-btn');
    btns.forEach(function(btn) {
        btn.addEventListener('click', function() {
            btns.forEach(function(b) { b.classList.remove('active'); });
            this.classList.add('active');
            callback(this.dataset.iso);
        });
    });
}

wireIsoSelector('macIsoSelector', function(iso) {
    currentMacISO = iso;
    buildMacChart(iso);
});

wireIsoSelector('benchIsoSelector', function(iso) {
    currentBenchISO = iso;
    buildBenchmarkChart(iso);
});

// --- Initialize charts ---
buildMacChart(currentMacISO);
buildBenchmarkChart(currentBenchISO);

})();
</script>
</body>
</html>
